{% extends 'base.html' %}
{% block scripts %}
    {{ moment.include_jquery() }}
    {{ moment.include_moment() }}
    {{ moment.lang('ko') }}
{% endblock %}
{% block content %}
    <h1>날짜 : {{ moment(dt).format('MMMM Do YYYY') }}.</h1>
    <div tabindex="-1" id="notebook" class="border-box-sizing">
        <div class="container" id="notebook-container">

            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[1]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span
                                    class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="k">import</span> <span
                                        class="n">BeautifulSoup</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[2]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span
                                    class="nf">getURL</span><span class="p">(</span><span class="n">url</span><span
                                    class="p">):</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span
                                        class="n">get</span><span class="p">(</span><span class="n">url</span><span
                                        class="p">)</span>
    <span class="n">dom</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span
                                        class="p">(</span><span class="n">html</span><span class="o">.</span><span
                                        class="n">text</span><span class="p">,</span><span
                                        class="s2">&quot;lxml&quot;</span><span class="p">)</span>
    <span class="c1">#links = dom.find_all() #css selector는 구글에서만 실행</span>
    <span class="k">return</span> <span class="n">dom</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[3]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="n">url</span> <span
                                    class="o">=</span> <span class="s2">&quot;http://openapi.airkorea.or.kr/openapi/services/rest/ArpltnInforInqireSvc/getMsrstnAcctoRltmMesureDnsty?serviceKey=0xfE7KsqCRvly8WqAN7j%2BP3UOwr1c2n%2BO4R3yKGwmOHzgCJ7LccKci0zdNmZbQUQbt3edT3CKrl4%2BG83Xhx25A%3D%3D&amp;numOfRows=10&amp;pageSize=10&amp;pageNo=1&amp;startPage=1&amp;stationName=</span><span
                                    class="si">%E</span><span class="s2">C%A2</span><span class="si">%85%</span><span
                                    class="s2">EB%A1%9C</span><span class="si">%E</span><span class="s2">A%B5%AC&amp;dataTerm=DAILY&amp;ver=1.3&quot;</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[4]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="n">dom</span> <span
                                    class="o">=</span> <span class="n">getURL</span><span class="p">(</span><span
                                    class="n">url</span><span class="p">)</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[5]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="nb">type</span><span
                                    class="p">(</span><span class="n">dom</span><span class="p">)</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="output_wrapper">
                    <div class="output">


                        <div class="output_area">

                            <div class="prompt output_prompt">Out[5]:</div>


                            <div class="output_text output_subarea output_execute_result">
                                <pre>bs4.BeautifulSoup</pre>
                            </div>

                        </div>

                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[6]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="nb">id</span> <span
                                    class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dom</span><span
                                        class="o">.</span><span class="n">find_all</span><span class="p">(</span><span
                                        class="s2">&quot;item&quot;</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span
                                        class="n">text</span><span class="o">.</span><span class="n">split</span><span
                                        class="p">()</span>
    <span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span
                                        class="mi">0</span><span class="p">,</span> <span class="nb">id</span><span
                                        class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span
                                        class="p">)</span> <span class="o">==</span> <span class="mi">21</span><span
                                        class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span> <span
                                        class="o">=</span> <span class="s2">&quot;-&quot;</span>
        <span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span
                                        class="mi">21</span><span class="p">,</span><span class="mi">2</span><span
                                        class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="output_wrapper">
                    <div class="output">


                        <div class="output_area">

                            <div class="prompt"></div>


                            <div class="output_subarea output_stream output_stdout output_text">
<pre>[1, &#39;2018-07-17&#39;, &#39;24:00&#39;, &#39;도시대기&#39;, &#39;0.004&#39;, &#39;0.2&#39;, &#39;0.002&#39;, &#39;0.023&#39;, &#39;27&#39;, &#39;30&#39;, &#39;25&#39;, &#39;27&#39;, &#39;79&#39;, &#39;2&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;2&#39;, &#39;1&#39;, &#39;2&#39;]
[2, &#39;2018-07-17&#39;, &#39;23:00&#39;, &#39;도시대기&#39;, &#39;0.005&#39;, &#39;0.3&#39;, &#39;0.002&#39;, &#39;0.024&#39;, &#39;28&#39;, &#39;31&#39;, &#39;28&#39;, &#39;28&#39;, &#39;82&#39;, &#39;2&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;2&#39;, &#39;2&#39;, &#39;1&#39;, &#39;2&#39;]
[3, &#39;2018-07-17&#39;, &#39;22:00&#39;, &#39;도시대기&#39;, &#39;0.006&#39;, &#39;0.2&#39;, &#39;0.003&#39;, &#39;0.024&#39;, &#39;25&#39;, &#39;31&#39;, &#39;23&#39;, &#39;27&#39;, &#39;79&#39;, &#39;2&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;2&#39;, &#39;2&#39;, &#39;1&#39;, &#39;2&#39;]
[4, &#39;2018-07-17&#39;, &#39;21:00&#39;, &#39;도시대기&#39;, &#39;0.005&#39;, &#39;0.3&#39;, &#39;0.006&#39;, &#39;0.024&#39;, &#39;-&#39;, &#39;31&#39;, &#39;30&#39;, &#39;27&#39;, &#39;79&#39;, &#39;2&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;2&#39;, &#39;2&#39;, &#39;-&#39;, 2]
[5, &#39;2018-07-17&#39;, &#39;20:00&#39;, &#39;도시대기&#39;, &#39;0.004&#39;, &#39;0.4&#39;, &#39;0.013&#39;, &#39;0.024&#39;, &#39;28&#39;, &#39;32&#39;, &#39;27&#39;, &#39;27&#39;, &#39;79&#39;, &#39;2&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;2&#39;, &#39;2&#39;, &#39;1&#39;, &#39;2&#39;]
[6, &#39;2018-07-17&#39;, &#39;19:00&#39;, &#39;도시대기&#39;, &#39;0.004&#39;, &#39;0.3&#39;, &#39;0.020&#39;, &#39;0.017&#39;, &#39;27&#39;, &#39;34&#39;, &#39;22&#39;, &#39;27&#39;, &#39;79&#39;, &#39;2&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;2&#39;, &#39;2&#39;, &#39;1&#39;, &#39;2&#39;]
[7, &#39;2018-07-17&#39;, &#39;18:00&#39;, &#39;도시대기&#39;, &#39;0.004&#39;, &#39;0.3&#39;, &#39;0.019&#39;, &#39;0.014&#39;, &#39;27&#39;, &#39;35&#39;, &#39;25&#39;, &#39;28&#39;, &#39;82&#39;, &#39;2&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;2&#39;, &#39;2&#39;, &#39;1&#39;, &#39;2&#39;]
[8, &#39;2018-07-17&#39;, &#39;17:00&#39;, &#39;도시대기&#39;, &#39;0.006&#39;, &#39;0.2&#39;, &#39;0.020&#39;, &#39;0.014&#39;, &#39;37&#39;, &#39;37&#39;, &#39;34&#39;, &#39;28&#39;, &#39;82&#39;, &#39;2&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;2&#39;, &#39;2&#39;, &#39;2&#39;, &#39;2&#39;]
[9, &#39;2018-07-17&#39;, &#39;16:00&#39;, &#39;도시대기&#39;, &#39;0.008&#39;, &#39;0.3&#39;, &#39;0.028&#39;, &#39;0.017&#39;, &#39;38&#39;, &#39;37&#39;, &#39;36&#39;, &#39;27&#39;, &#39;79&#39;, &#39;2&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;1&#39;, &#39;2&#39;, &#39;2&#39;, &#39;2&#39;, &#39;3&#39;]
[10, &#39;2018-07-17&#39;, &#39;15:00&#39;, &#39;도시대기&#39;, &#39;0.008&#39;, &#39;0.3&#39;, &#39;0.036&#39;, &#39;0.019&#39;, &#39;42&#39;, &#39;36&#39;, &#39;37&#39;, &#39;26&#39;, &#39;77&#39;, &#39;2&#39;, &#39;1&#39;, &#39;1&#39;, &#39;2&#39;, &#39;1&#39;, &#39;2&#39;, &#39;2&#39;, &#39;2&#39;, &#39;3&#39;]
</pre>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[7]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span
                                    class="nn">sqlite3</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[8]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="n">conn</span> <span
                                    class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span
                                    class="n">connect</span><span class="p">(</span><span
                                    class="s2">&quot;test.db&quot;</span><span class="p">)</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[9]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="n">cur</span> <span
                                    class="o">=</span> <span class="n">conn</span><span class="o">.</span><span
                                    class="n">cursor</span><span class="p">()</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[10]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="n">cur</span><span
                                    class="o">.</span><span class="n">executescript</span><span class="p">(</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    create table cityAir(</span>
<span class="sd">        id int ptimary key, </span>
<span class="sd">        date text,</span>
<span class="sd">        time text,</span>
<span class="sd">        mangname text,</span>
<span class="sd">        so2value int, </span>
<span class="sd">        covalue int, </span>
<span class="sd">        o3value int, </span>
<span class="sd">        no2value int, </span>
<span class="sd">        pm10value int, </span>
<span class="sd">        pm10value24 int, </span>
<span class="sd">        pm25value int, </span>
<span class="sd">        pm25value24 int, </span>
<span class="sd">        khaivalue int, </span>
<span class="sd">        khaigrade int, </span>
<span class="sd">        so2grade int, </span>
<span class="sd">        cograde int, </span>
<span class="sd">        o3grade int, </span>
<span class="sd">        no2grade int, </span>
<span class="sd">        pm10grade int, </span>
<span class="sd">        pm25grade int, </span>
<span class="sd">        pm10grade1h int,  </span>
<span class="sd">        pm25grade1h int</span>
<span class="sd">    );</span>
<span class="sd">&quot;&quot;&quot;</span><span class="p">)</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="output_wrapper">
                    <div class="output">


                        <div class="output_area">

                            <div class="prompt output_prompt">Out[10]:</div>


                            <div class="output_text output_subarea output_execute_result">
                                <pre>&lt;sqlite3.Cursor at 0x110c09880&gt;</pre>
                            </div>

                        </div>

                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[11]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="nb">id</span> <span
                                    class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dom</span><span
                                        class="o">.</span><span class="n">find_all</span><span class="p">(</span><span
                                        class="s2">&quot;item&quot;</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">i</span><span class="o">.</span><span
                                        class="n">text</span><span class="o">.</span><span class="n">split</span><span
                                        class="p">()</span>
    <span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span
                                        class="mi">0</span><span class="p">,</span> <span class="nb">id</span><span
                                        class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span
                                        class="p">)</span> <span class="o">==</span> <span class="mi">21</span><span
                                        class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="mi">20</span><span class="p">]</span> <span
                                        class="o">=</span> <span class="s2">&quot;-&quot;</span>
        <span class="n">data</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span
                                        class="mi">21</span><span class="p">,</span><span class="mi">2</span><span
                                        class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span
                                        class="s2">&quot;insert into cityAir (id, date, time, mangname, so2value, covalue, o3value, no2value, pm10value, pm10value24, pm25value, pm25value24, khaivalue, khaigrade, so2grade, cograde, o3grade, no2grade, pm10grade, pm25grade, pm10grade1h, pm25grade1h) values(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)&quot;</span><span
                                        class="p">,</span><span class="n">data</span><span class="p">)</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[14]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="n">cur</span><span
                                    class="o">.</span><span class="n">execute</span><span class="p">(</span><span
                                    class="s2">&quot;select * from cityAir&quot;</span><span class="p">)</span> <span
                                    class="c1">#named style</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="output_wrapper">
                    <div class="output">


                        <div class="output_area">

                            <div class="prompt output_prompt">Out[14]:</div>


                            <div class="output_text output_subarea output_execute_result">
                                <pre>&lt;sqlite3.Cursor at 0x110c09880&gt;</pre>
                            </div>

                        </div>

                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[12]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="n">conn</span><span
                                    class="o">.</span><span class="n">commit</span><span class="p">()</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

            </div>
            <div class="cell border-box-sizing code_cell rendered">
                <div class="input">
                    <div class="prompt input_prompt">In&nbsp;[15]:</div>
                    <div class="inner_cell">
                        <div class="input_area">
                            <div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span
                                    class="p">(</span><span class="n">cur</span><span class="o">.</span><span class="n">fetchall</span><span
                                    class="p">())</span>
</pre>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="output_wrapper">
                    <div class="output">


                        <div class="output_area">

                            <div class="prompt"></div>


                            <div class="output_subarea output_stream output_stdout output_text">
<pre>[(1, &#39;2018-07-17&#39;, &#39;24:00&#39;, &#39;도시대기&#39;, 0.004, 0.2, 0.002, 0.023, 27, 30, 25, 27, 79, 2, 1, 1, 1, 1, 1, 2, 1, 2), (2, &#39;2018-07-17&#39;, &#39;23:00&#39;, &#39;도시대기&#39;, 0.005, 0.3, 0.002, 0.024, 28, 31, 28, 28, 82, 2, 1, 1, 1, 1, 2, 2, 1, 2), (3, &#39;2018-07-17&#39;, &#39;22:00&#39;, &#39;도시대기&#39;, 0.006, 0.2, 0.003, 0.024, 25, 31, 23, 27, 79, 2, 1, 1, 1, 1, 2, 2, 1, 2), (4, &#39;2018-07-17&#39;, &#39;21:00&#39;, &#39;도시대기&#39;, 0.005, 0.3, 0.006, 0.024, &#39;-&#39;, 31, 30, 27, 79, 2, 1, 1, 1, 1, 2, 2, &#39;-&#39;, 2), (5, &#39;2018-07-17&#39;, &#39;20:00&#39;, &#39;도시대기&#39;, 0.004, 0.4, 0.013, 0.024, 28, 32, 27, 27, 79, 2, 1, 1, 1, 1, 2, 2, 1, 2), (6, &#39;2018-07-17&#39;, &#39;19:00&#39;, &#39;도시대기&#39;, 0.004, 0.3, 0.02, 0.017, 27, 34, 22, 27, 79, 2, 1, 1, 1, 1, 2, 2, 1, 2), (7, &#39;2018-07-17&#39;, &#39;18:00&#39;, &#39;도시대기&#39;, 0.004, 0.3, 0.019, 0.014, 27, 35, 25, 28, 82, 2, 1, 1, 1, 1, 2, 2, 1, 2), (8, &#39;2018-07-17&#39;, &#39;17:00&#39;, &#39;도시대기&#39;, 0.006, 0.2, 0.02, 0.014, 37, 37, 34, 28, 82, 2, 1, 1, 1, 1, 2, 2, 2, 2), (9, &#39;2018-07-17&#39;, &#39;16:00&#39;, &#39;도시대기&#39;, 0.008, 0.3, 0.028, 0.017, 38, 37, 36, 27, 79, 2, 1, 1, 1, 1, 2, 2, 2, 3), (10, &#39;2018-07-17&#39;, &#39;15:00&#39;, &#39;도시대기&#39;, 0.008, 0.3, 0.036, 0.019, 42, 36, 37, 26, 77, 2, 1, 1, 2, 1, 2, 2, 2, 3)]
</pre>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>

{% endblock %}